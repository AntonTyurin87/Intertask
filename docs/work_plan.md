# План работ над Intertask

#### Предварительная подготовка.
- [x] Рассмотреть систему постов и каментариев на Хабр.
- [x] Рассмотреть систему постов и каментариев на Reddit.
- [x] Составить структуру БД для реализации проекта.
- [x] Создать предварительную структуру проекта.
- [x] Составить .sql файл для развёртывания структуры БД и её наполнения данными для отработки.

#### Реализация первого функционала. 
- [x] Разработка структур данных для схемы GraphQL (Пост, каментарий, пользователь).
- [x] Реализовать GraphQL запроса всех постов с пагинацией.
- [x] Запустить приложение и проверить запросы всех постов через Postman.
- [x] Составление README.md и сопутствующих описательных документов.

#### Анализ промежуточного результата 1.
- [x] Чистота кода?
- [x] Описать первичный анализ в соответствующем файле
- [x] Исправить грамматические ошибки в названии папок и функций
- [x] Ввести работу с БД через экземпляр структуры
- [x] Как принимать на вход одновременно и параметры для постов и для каментариев?
- [x] Как реализована струкура связи запроса и ответа от GraphQL к БД и обратно?
- [ ] Составить схему требований к задаче

#### Реализация основного функционала в БД.
- [x] Сделать объединяющую функцию для разных Handle
- [x] Реализовать GraphQL запрос на отдельный пост с каментариями с пагинацией Query.
- [x] Сделать одинаковыми поля БД, типов и запросов
- [x] Реализовать GraphQL запрос на запрет/разрешение комментариев Mutation.
- [x] Реализовать GraphQL запрос на отправку нового поста Mutation.
- [x] Реализовать GraphQL оповещение на комментирование поста Subscription.
- [ ] Сделать .sql файл для создания пустой базы

#### Реализация основного функционала в "in memory".
- [x] Реализовать интерфейс, метод для БД и метод для "in memory".
- [ ] Создать точку выбора параметров БД или "in memory".
- [ ] Составить предварительный план тестирования. Или описание подходов.

#### Анализ промежуточного результата 2.
- [x] Как выглядит архитектура папок и пакетов.
- [x] Чистота кода?
- [ ] Составить скрипты для передачи входных данных в приложение.
- [ ] Описать в виде текста с премером как устроена связь пост-комментарий-комментарий на Хабре.
- [ ] Описать в виде текста с премером как устроена связь пост-комментарий-комментарий в Reddit.

#### Создание тестов.
- [x] Составить план тестирования.
- [x] Составить тесты для отдельных функций, при необходимости..

#### Упаковка в Docker образ.
- [x] Описать требований к Docker образу.
- [x] Составить Dockerfile и отработать создание образа.
- [ ] Проверить работоспособность Docker образа.
- [ ] Запушиь Docker образ на DockerHub.

#### Подчистка проекта.
- [ ] Прочитать код каждого файла и проверить комментарии. При необходимости поправить.
- [ ] Прочитать сопутствующие текстовые файлы. При необходимости поправить.
- [ ] Прочитать сопутствующие текстовые файлы. При необходимости поправить.
- [ ] Особенно внимательно прочитать README.md.
- [ ] Добавить в README.md ссылку на Docker образ на DockerHub.
- [ ] Проверить функционал через клонирование и запуск проекта с GitHub в отдельный новый репозиторий.


#### Список неопределённостей в порядке от новой к старой.
- [ ] Формировние Docker образа. На основе образа с Golang, на пустом Linux, на образа с Postgres.
- [x] Возможность реализации работы с помощью interface{} через БД и "in memory".
- [x] Как реализовать подписку и уведомления на пост. На свой пост и на чужой пост.
- [ ] Как измерять эффективность работы системы при множественном одновременном использовании, сравнимая с популярными сервисами, такими как Хабр.
- [ ] Как в реализации учитываются возможные проблемы с производительностью, такие как проблемы с n+1 запросами и большая вложенность комментариев.
- [x] Как работать с данными в формате "in memory". 
- [x] Как выглядит система постов и каментариев на Хабр и Reddit.
- [x] Что такое GraphQL.

---

# Подготова содержимого репозитория
- [x] Структура папок
- [x] Наименование полей структур
- [x] Наименование полей БД
- [x] Убрать лишние и/или не нужные файлы
- [x] Подготовить sql файл для тестовой базы
- [x] Заполнить sql файл для пустой базы
- [] Заполнить makefile
- [] Заполнить READMME.md
- [] Проверить и почистить analisis.md
- [] Проверить и почистить task_text.md
- [] Проверить и почистить test_plan.md
- [] Проверить и почистить work_plan.md

## Подготовка кода
- [x] Перенести типы в файл schema. Файл и папку bloginterface удалить.
- [x] Поправить наименолвание и написание полей типов
    - [x] В объявлении типов
    - [x] В БД
    - [x] В коде

### Общий подход к каждому файлу
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

#### Шаблон действий по каждой функции/файлу
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных


#### Отрабока кода в папке postgress
- [] Выполнено?

##### Файл subscriptiontype.go
- [z] Общий вид файла и кода до функций

##### UpdatetPost
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### CreateNewComment
- [-] Объединить два запроса в базу в один. // Нужна другая библиотека для БД. Запросы черех Exec не возвращают ID
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### CreateNewPost
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### FetchAllPosts
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### FetchPostByiD
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### FetchCommentsByPostID
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### Файл initdb.go
- [] Общий вид файла и кода до функций
- [] Данные для подключения к БД необходимо братьиз скрипта

#### Отрабока кода в папке inmemory

##### Файл inmemoryrequest.go
- [] Общий вид файла и кода до функций

##### UpdatetPost (inmemory)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### CreateNewComment (inmemory)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### CreateNewPost (inmemory)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### FetchAllPosts (inmemory)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### FetchPostByiD (inmemory)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### FetchCommentsByPostID (inmemory)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### Файл initdb.go функция InitDB
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

#### Отрабока кода в папке graphql
- [x] Написать Description к типам в schema.go

##### CreatePostType (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### SubscribeToNewComments (graphql)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

##### UnsubscribeFromNewComments (graphql)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

##### NewComment (graphql)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

##### MutationType (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### createPost (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### commentStatus (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### createComment (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### QueryType (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### getPosts (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### getPostWithComments (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

##### SubscriptionType (graphql)
- [x] Привести текст кода в аккуратный вид
- [x] Комментарий к самой функции
- [x] Комментарии к содержимому функции
- [x] Наименование и объявление переменных

---

#### Отрабока кода в папке handler
- [] Комментари к переменным, типам и структурам в файле subscriptionhandler.go

##### NewSubscriptionHandler (handler)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

##### handleSubscription (handler)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

##### unsubscribe (handler)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

##### subscribe (handler)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

##### subscribe (handler)
- [] Привести текст кода в аккуратный вид
- [] Комментарий к самой функции
- [] Комментарии к содержимому функции
- [] Наименование и объявление переменных

#### Отрабока кода в папке cmd
- [] Комментари в функцию main